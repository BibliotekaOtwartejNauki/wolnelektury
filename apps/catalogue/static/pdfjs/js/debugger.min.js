"use strict";var FontInspector=function(){function s(){var e=document.querySelectorAll("div["+i+"]");for(var t=0,n=e.length;t<n;++t){var r=e[t];r.className=""}}function o(){var e=document.querySelectorAll("div["+i+"]");for(var t=0,n=e.length;t<n;++t){var r=e[t];r.className="debuggerHideText"}}function u(e,t){var n=document.querySelectorAll("div["+i+"="+e+"]");for(var r=0,s=n.length;r<s;++r){var o=n[r];o.className=t?"debuggerShowText":"debuggerHideText"}}function a(e){if(!e.target.dataset.fontName||e.target.tagName.toUpperCase()!=="DIV")return;var t=e.target.dataset.fontName,n=document.getElementsByTagName("input");for(var r=0;r<n.length;++r){var i=n[r];if(i.dataset.fontName!=t)continue;i.checked=!i.checked,u(t,i.checked),i.scrollIntoView()}}var t,n=300,r=!1,i="data-font-name";return{id:"FontInspector",name:"Font Inspector",panel:null,manager:null,init:function(){var n=this.panel;n.setAttribute("style","padding: 5px;");var r=document.createElement("button");r.addEventListener("click",o),r.textContent="Refresh",n.appendChild(r),t=document.createElement("div"),n.appendChild(t)},enabled:!1,get active(){return r},set active(e){r=e,r?(document.body.addEventListener("click",a,!0),o()):(document.body.removeEventListener("click",a,!0),s())},fontAdded:function(n,r){function i(e,t){var n=document.createElement("table");for(var r=0;r<t.length;r++){var i=document.createElement("tr"),s=document.createElement("td");s.textContent=t[r],i.appendChild(s);var o=document.createElement("td");o.textContent=e[t[r]].toString(),i.appendChild(o),n.appendChild(i)}return n}var s=i(n,["name","type"]),a=/url\(['"]?([^\)"']+)/.exec(r),f=n.loadedName,l=document.createElement("div"),c=document.createElement("span");c.textContent=f;var h=document.createElement("a");h.href=a[1],h.textContent="Download";var p=document.createElement("a");p.href="",p.textContent="Log",p.addEventListener("click",function(e){e.preventDefault(),console.log(n)});var d=document.createElement("input");d.setAttribute("type","checkbox"),d.dataset.fontName=f,d.addEventListener("click",function(e,t){return function(){u(t,e.checked)}}(d,f)),l.appendChild(d),l.appendChild(c),l.appendChild(document.createTextNode(" ")),l.appendChild(h),l.appendChild(document.createTextNode(" ")),l.appendChild(p),l.appendChild(s),t.appendChild(l),setTimeout(function(){this.active&&o()}.bind(this),2e3)}}}(),StepperManager=function(){var t=[],n=null,r=null,i=null,s={};return{id:"Stepper",name:"Stepper",panel:null,manager:null,init:function(){var t=this;this.panel.setAttribute("style","padding: 5px;"),r=document.createElement("div"),i=document.createElement("select"),i.addEventListener("change",function(e){t.selectStepper(this.value)}),r.appendChild(i),n=document.createElement("div"),this.panel.appendChild(r),this.panel.appendChild(n),sessionStorage.getItem("pdfjsBreakPoints")&&(s=JSON.parse(sessionStorage.getItem("pdfjsBreakPoints")))},enabled:!1,active:!1,create:function(r){var o=document.createElement("div");o.id="stepper"+r,o.setAttribute("hidden",!0),o.className="stepper",n.appendChild(o);var u=document.createElement("option");u.textContent="Page "+(r+1),u.value=r,i.appendChild(u);var a=s[r]||[],f=new Stepper(o,r,a);return t.push(f),t.length===1&&this.selectStepper(r,!1),f},selectStepper:function(n,r){r&&this.manager.selectPanel(1);for(var s=0;s<t.length;++s){var o=t[s];o.pageIndex==n?o.panel.removeAttribute("hidden"):o.panel.setAttribute("hidden",!0)}var u=i.options;for(var s=0;s<u.length;++s){var a=u[s];a.selected=a.value==n}},saveBreakPoints:function(t,n){s[t]=n,sessionStorage.setItem("pdfjsBreakPoints",JSON.stringify(s))}}}(),Stepper=function(){function t(e,t,n){this.panel=e,this.len=0,this.breakPoint=0,this.nextBreakPoint=null,this.pageIndex=t,this.breakPoints=n,this.currentIdx=-1}return t.prototype={init:function(t){function n(e,t){var n=document.createElement(e);return t&&(n.textContent=t),n}var r=this.panel;this.len=t.fnArray.length;var i=n("div","c=continue, s=step"),s=n("table");i.appendChild(s),s.cellSpacing=0;var o=n("tr");s.appendChild(o),o.appendChild(n("th","Break")),o.appendChild(n("th","Idx")),o.appendChild(n("th","fn")),o.appendChild(n("th","args"));var u=this;for(var a=0;a<t.fnArray.length;a++){var f=n("tr");f.className="line",f.dataset.idx=a,s.appendChild(f);var l=this.breakPoints.indexOf(a)!=-1,c=t.argsArray[a]?t.argsArray[a]:[],h=n("td"),p=n("input");p.type="checkbox",p.className="points",p.checked=l,p.onclick=function(e){return function(){this.checked?u.breakPoints.push(e):u.breakPoints.splice(u.breakPoints.indexOf(e),1),StepperManager.saveBreakPoints(u.pageIndex,u.breakPoints)}}(a),h.appendChild(p),f.appendChild(h),f.appendChild(n("td",a.toString())),f.appendChild(n("td",t.fnArray[a])),f.appendChild(n("td",c.join(", ")))}r.appendChild(i);var u=this},getNextBreakPoint:function(){this.breakPoints.sort(function(e,t){return e-t});for(var t=0;t<this.breakPoints.length;t++)if(this.breakPoints[t]>this.currentIdx)return this.breakPoints[t];return null},breakIt:function(t,n){StepperManager.selectStepper(this.pageIndex,!0);var r=this,i=document;r.currentIdx=t;var s=function(e){switch(e.keyCode){case 83:i.removeEventListener("keydown",s,!1),r.nextBreakPoint=r.currentIdx+1,r.goTo(-1),n();break;case 67:i.removeEventListener("keydown",s,!1);var t=r.getNextBreakPoint();r.nextBreakPoint=t,r.goTo(-1),n()}};i.addEventListener("keydown",s,!1),r.goTo(t)},goTo:function(t){var n=this.panel.getElementsByClassName("line");for(var r=0,i=n.length;r<i;++r){var s=n[r];s.dataset.idx==t?(s.style.backgroundColor="rgb(251,250,207)",s.scrollIntoView()):s.style.backgroundColor=null}}},t}(),Stats=function(){function n(e){while(e.hasChildNodes())e.removeChild(e.lastChild)}function r(e){for(var n=0,r=t.length;n<r;++n)if(t[n].pageNumber===e)return n;return!1}var t=[];return{id:"Stats",name:"Stats",panel:null,manager:null,init:function(){this.panel.setAttribute("style","padding: 5px;"),PDFJS.enableStats=!0},enabled:!1,active:!1,add:function(e,i){if(!i)return;var s=r(e);if(s!==!1){var o=t[s];this.panel.removeChild(o.div),t.splice(s,1)}var u=document.createElement("div");u.className="stats";var a=document.createElement("div");a.className="title",a.textContent="Page: "+e;var f=document.createElement("div");f.textContent=i.toString(),u.appendChild(a),u.appendChild(f),t.push({pageNumber:e,div:u}),t.sort(function(e,t){return e.pageNumber-t.pageNumber}),n(this.panel);for(var l=0,c=t.length;l<c;++l)this.panel.appendChild(t[l].div)}}}(),PDFBug=function(){var t=300,n=[],r=null;return{tools:[FontInspector,StepperManager,Stats],enable:function(e){var t=!1,n=this.tools;e.length===1&&e[0]==="all"&&(t=!0);for(var r=0;r<n.length;++r){var i=n[r];if(t||e.indexOf(i.id)!==-1)i.enabled=!0}t||n.sort(function(t,r){var i=e.indexOf(t.id);i=i<0?n.length:i;var s=e.indexOf(r.id);return s=s<0?n.length:s,i-s})},init:function(){var r=document.createElement("div");r.id="PDFBug";var i=document.createElement("div");i.setAttribute("class","controls"),r.appendChild(i);var s=document.createElement("div");s.setAttribute("class","panels"),r.appendChild(s);var o=document.getElementById("viewerContainer");o.appendChild(r),o.style.right=t+"px";var u=this.tools,a=this;for(var f=0;f<u.length;++f){var l=u[f],c=document.createElement("div"),h=document.createElement("button");h.textContent=l.name,h.addEventListener("click",function(e){return function(t){t.preventDefault(),a.selectPanel(e)}}(f)),i.appendChild(h),s.appendChild(c),l.panel=c,l.manager=this,l.enabled?l.init():c.textContent=l.name+" is disabled. To enable add "+' "'+l.id+'" to the pdfBug parameter '+"and refresh (seperate multiple by commas).",n.push(h)}this.selectPanel(0)},selectPanel:function(t){if(t===r)return;r=t;var i=this.tools;for(var s=0;s<i.length;++s)s==t?(n[s].setAttribute("class","active"),i[s].active=!0,i[s].panel.removeAttribute("hidden")):(n[s].setAttribute("class",""),i[s].active=!1,i[s].panel.setAttribute("hidden","true"))}}}();