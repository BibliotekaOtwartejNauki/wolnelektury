"use strict";function getFileName(e){var t=e.indexOf("#"),n=e.indexOf("?"),r=Math.min(t>0?t:e.length,n>0?n:e.length);return e.substring(e.lastIndexOf("/",r)+1,r)}function scrollIntoView(e,t){var n=e.offsetParent,r=e.offsetTop+e.clientTop;if(!n){console.error("offsetParent is not set -- cannot scroll");return}while(n.clientHeight==n.scrollHeight){r+=n.offsetTop,n=n.offsetParent;if(!n)return}t&&(r+=t.top),n.scrollTop=r}function updateViewarea(){if(!PDFView.initialized)return;var e=PDFView.getVisiblePages(),t=e.views;if(t.length===0)return;PDFView.renderHighestPriority();var n=PDFView.page,r=e.first;for(var i=0,s=t.length,o=!1;i<s;++i){var u=t[i];if(u.percent<100)break;if(u.id===PDFView.page){o=!0;break}}o||(n=t[0].id),PDFView.isPresentationMode||(updateViewarea.inProgress=!0,PDFView.page=n,updateViewarea.inProgress=!1);var a=PDFView.currentScale,f=PDFView.currentScaleValue,l=f==a?a*100:f,c=r.id,h="#page="+c;h+="&zoom="+l;var p=PDFView.pages[c-1],d=p.getPagePoint(PDFView.container.scrollLeft,PDFView.container.scrollTop-r.y);h+=","+Math.round(d[0])+","+Math.round(d[1]);var v=PDFView.store;v.initializedPromise.then(function(){v.set("exists",!0),v.set("page",c),v.set("zoom",l),v.set("scrollLeft",Math.round(d[0])),v.set("scrollTop",Math.round(d[1]))});var m=PDFView.getAnchorUrl(h);document.getElementById("viewBookmark").href=m,PDFHistory.updateCurrentBookmark(h,c)}function selectScaleOption(e){var t=document.getElementById("scaleSelect").options,n=!1;for(var r=0;r<t.length;r++){var i=t[r];if(i.value!=e){i.selected=!1;continue}i.selected=!0,n=!0}return n}var DEFAULT_SCALE="auto",DEFAULT_SCALE_DELTA=1.1,UNKNOWN_SCALE=0,CACHE_SIZE=20,CSS_UNITS=96/72,SCROLLBAR_PADDING=40,VERTICAL_PADDING=5,MIN_SCALE=.25,MAX_SCALE=4,SETTINGS_MEMORY=20,HISTORY_DISABLED=!1,SCALE_SELECT_CONTAINER_PADDING=8,SCALE_SELECT_PADDING=22,RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},FindStates={FIND_FOUND:0,FIND_NOTFOUND:1,FIND_WRAPPED:2,FIND_PENDING:3},mozL10n=document.mozL10n||document.webL10n,Cache=function(t){var n=[];this.push=function(r){var i=n.indexOf(r);i>=0&&n.splice(i),n.push(r),n.length>t&&n.shift().destroy()}},ProgressBar=function(){function t(e,t,n){return Math.min(Math.max(e,t),n)}function n(e,t){this.div=document.querySelector(e+" .progress"),this.height=t.height||100,this.width=t.width||100,this.units=t.units||"%",this.div.style.height=this.height+this.units,this.percent=0}return n.prototype={updateBar:function(){if(this._indeterminate){this.div.classList.add("indeterminate"),this.div.style.width=this.width+this.units;return}this.div.classList.remove("indeterminate");var t=this.width*this._percent/100;this.div.style.width=t+this.units},get percent(){return this._percent},set percent(e){this._indeterminate=isNaN(e),this._percent=t(e,0,100),this.updateBar()}},n}(),Settings=function(){function n(e){this.fingerprint=e,this.initializedPromise=new PDFJS.Promise;var n=function(t){this.initialize(t||"{}"),this.initializedPromise.resolve()}.bind(this);t&&n(localStorage.getItem("database"))}var t=function(){try{return"localStorage"in window&&window.localStorage!==null&&localStorage}catch(t){return!1}}();return n.prototype={initialize:function(t){t=JSON.parse(t),"files"in t||(t.files=[]),t.files.length>=SETTINGS_MEMORY&&t.files.shift();var n;for(var r=0,i=t.files.length;r<i;r++){var s=t.files[r];if(s.fingerprint==this.fingerprint){n=r;break}}typeof n!="number"&&(n=t.files.push({fingerprint:this.fingerprint})-1),this.file=t.files[n],this.database=t},set:function(n,r){if(!this.initializedPromise.isResolved)return;var i=this.file;i[n]=r;var s=JSON.stringify(this.database);t&&localStorage.setItem("database",s)},get:function(t,n){return this.initializedPromise.isResolved?this.file[t]||n:n}},n}(),cache=new Cache(CACHE_SIZE),currentPageNumber=1,PDFFindController={startedTextExtraction:!1,extractTextPromises:[],active:!1,pageContents:[],pageMatches:[],selected:{pageIdx:-1,matchIdx:-1},offset:{pageIdx:null,matchIdx:null},resumePageIdx:null,resumeCallback:null,state:null,dirtyMatch:!1,findTimeout:null,initialize:function(){var e=["find","findagain","findhighlightallchange","findcasesensitivitychange"];this.handleEvent=this.handleEvent.bind(this);for(var t=0;t<e.length;t++)window.addEventListener(e[t],this.handleEvent)},calcFindMatch:function(e){var t=this.pageContents[e],n=this.state.query,r=this.state.caseSensitive,i=n.length;if(i===0)return;r||(t=t.toLowerCase(),n=n.toLowerCase());var s=[],o=-i;for(;;){o=t.indexOf(n,o+i);if(o===-1)break;s.push(o)}this.pageMatches[e]=s,this.updatePage(e);if(this.resumePageIdx===e){var u=this.resumeCallback;this.resumePageIdx=null,this.resumeCallback=null,u()}},extractText:function(){function r(e){PDFView.pages[e].getTextContent().then(function(i){var s=i.bidiTexts,o="";for(var u=0;u<s.length;u++)o+=s[u].str;n.pageContents.push(o),n.extractTextPromises[e].resolve(e),e+1<PDFView.pages.length&&r(e+1)})}if(this.startedTextExtraction)return;this.startedTextExtraction=!0,this.pageContents=[];for(var e=0,t=PDFView.pdfDocument.numPages;e<t;e++)this.extractTextPromises.push(new PDFJS.Promise);var n=this;return r(0),this.extractTextPromise},handleEvent:function(e){if(this.state===null||e.type!=="findagain")this.dirtyMatch=!0;this.state=e.detail,this.updateUIState(FindStates.FIND_PENDING),this.extractText(),clearTimeout(this.findTimeout),e.type==="find"?this.findTimeout=setTimeout(this.nextMatch.bind(this),250):this.nextMatch()},updatePage:function(e){var t=PDFView.pages[e];this.selected.pageIdx===e&&t.scrollIntoView(),t.textLayer&&t.textLayer.updateMatches()},nextMatch:function(){var e=PDFView.pages,t=this.state.findPrevious,n=PDFView.pages.length;this.active=!0;if(this.dirtyMatch){this.dirtyMatch=!1,this.selected.pageIdx=this.selected.matchIdx=-1,this.offset.pageIdx=t?n-1:0,this.offset.matchIdx=null,this.hadMatch=!1,this.resumeCallback=null,this.resumePageIdx=null,this.pageMatches=[];var r=this;for(var i=0;i<n;i++)this.updatePage(i),this.extractTextPromises[i].onData(function(e){setTimeout(function(){r.calcFindMatch(e)})})}if(this.state.query===""){this.updateUIState(FindStates.FIND_FOUND);return}if(this.resumeCallback)return;var s=this.offset;if(s.matchIdx!==null){var o=this.pageMatches[s.pageIdx].length;if(!t&&s.matchIdx+1<o||t&&s.matchIdx>0){this.hadMatch=!0,s.matchIdx=t?s.matchIdx-1:s.matchIdx+1,this.updateMatch(!0);return}this.advanceOffsetPage(t)}this.nextPageMatch()},nextPageMatch:function(){this.resumePageIdx!==null&&console.error("There can only be one pending page.");var e=function(e){var t=this.offset,n=e.length,r=this.state.findPrevious;if(n)this.hadMatch=!0,t.matchIdx=r?n-1:0,this.updateMatch(!0);else{this.advanceOffsetPage(r);if(t.wrapped){t.matchIdx=null;if(!this.hadMatch){this.updateMatch(!1);return}}this.nextPageMatch()}}.bind(this),t=this.offset.pageIdx,n=this.pageMatches;if(!n[t]){this.resumeCallback=function(){e(n[t])},this.resumePageIdx=t;return}e(n[t])},advanceOffsetPage:function(e){var t=this.offset,n=this.extractTextPromises.length;t.pageIdx=e?t.pageIdx-1:t.pageIdx+1,t.matchIdx=null;if(t.pageIdx>=n||t.pageIdx<0){t.pageIdx=e?n-1:0,t.wrapped=!0;return}},updateMatch:function(e){var t=FindStates.FIND_NOTFOUND,n=this.offset.wrapped;this.offset.wrapped=!1;if(e){var r=this.selected.pageIdx;this.selected.pageIdx=this.offset.pageIdx,this.selected.matchIdx=this.offset.matchIdx,t=n?FindStates.FIND_WRAPPED:FindStates.FIND_FOUND,r!==-1&&r!==this.selected.pageIdx&&this.updatePage(r)}this.updateUIState(t,this.state.findPrevious),this.selected.pageIdx!==-1&&this.updatePage(this.selected.pageIdx,!0)},updateUIState:function(e,t){if(PDFView.supportsIntegratedFind){FirefoxCom.request("updateFindControlState",{result:e,findPrevious:t});return}PDFFindBar.updateUIState(e,t)}},PDFFindBar={opened:!1,initialize:function(){this.bar=document.getElementById("findbar"),this.toggleButton=document.getElementById("viewFind"),this.findField=document.getElementById("findInput"),this.highlightAll=document.getElementById("findHighlightAll"),this.caseSensitive=document.getElementById("findMatchCase"),this.findMsg=document.getElementById("findMsg"),this.findStatusIcon=document.getElementById("findStatusIcon");var e=this;this.toggleButton.addEventListener("click",function(){e.toggle()}),this.findField.addEventListener("input",function(){e.dispatchEvent("")}),this.bar.addEventListener("keydown",function(t){switch(t.keyCode){case 13:t.target===e.findField&&e.dispatchEvent("again",t.shiftKey);break;case 27:e.close()}}),document.getElementById("findPrevious").addEventListener("click",function(){e.dispatchEvent("again",!0)}),document.getElementById("findNext").addEventListener("click",function(){e.dispatchEvent("again",!1)}),this.highlightAll.addEventListener("click",function(){e.dispatchEvent("highlightallchange")}),this.caseSensitive.addEventListener("click",function(){e.dispatchEvent("casesensitivitychange")})},dispatchEvent:function(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent("find"+e,!0,!0,{query:this.findField.value,caseSensitive:this.caseSensitive.checked,highlightAll:this.highlightAll.checked,findPrevious:t}),window.dispatchEvent(n)},updateUIState:function(e,t){var n=!1,r="",i="";switch(e){case FindStates.FIND_FOUND:break;case FindStates.FIND_PENDING:i="pending";break;case FindStates.FIND_NOTFOUND:r=mozL10n.get("find_not_found",null,"Phrase not found"),n=!0;break;case FindStates.FIND_WRAPPED:t?r=mozL10n.get("find_reached_top",null,"Reached top of document, continued from bottom"):r=mozL10n.get("find_reached_bottom",null,"Reached end of document, continued from top")}n?this.findField.classList.add("notFound"):this.findField.classList.remove("notFound"),this.findField.setAttribute("data-status",i),this.findMsg.textContent=r},open:function(){if(this.opened)return;this.opened=!0,this.toggleButton.classList.add("toggled"),this.bar.classList.remove("hidden"),this.findField.select(),this.findField.focus()},close:function(){if(!this.opened)return;this.opened=!1,this.toggleButton.classList.remove("toggled"),this.bar.classList.add("hidden"),PDFFindController.active=!1},toggle:function(){this.opened?this.close():this.open()}},PDFHistory={initialized:!1,initialDestination:null,initialize:function(t){if(HISTORY_DISABLED||window.parent!==window)return;this.initialized=!0,this.reInitialized=!1,this.allowHashChange=!0,this.historyUnlocked=!0,this.previousHash=window.location.hash.substring(1),this.currentBookmark="",this.currentPage=0,this.updatePreviousBookmark=!1,this.previousBookmark="",this.nextHashParam="",this.fingerprint=t,this.currentUid=this.uid=0,this.current={};var n=window.history.state;this._isStateObjectDefined(n)?(n.target.dest?this.initialDestination=n.target.dest:PDFView.initialBookmark=n.target.hash,this.currentUid=n.uid,this.uid=n.uid+1,this.current=n.target):(n&&n.fingerprint&&this.fingerprint!==n.fingerprint&&(this.reInitialized=!0),window.history.replaceState({fingerprint:this.fingerprint},"",""));var r=this;window.addEventListener("popstate",function(t){t.preventDefault(),t.stopPropagation();if(!r.historyUnlocked)return;if(t.state)r._goTo(t.state);else{r.previousHash=window.location.hash.substring(1);if(r.uid===0){var n=r.previousHash&&r.currentBookmark&&r.previousHash!==r.currentBookmark?{hash:r.currentBookmark}:{page:1};r.historyUnlocked=!1,r.allowHashChange=!1,window.history.back(),r._pushToHistory(n,!1,!0),window.history.forward(),r.historyUnlocked=!0}r._pushToHistory({hash:r.previousHash},!1,!0),r.currentBookmark&&(r.previousBookmark=r.currentBookmark)}},!1),window.addEventListener("beforeunload",function(t){var n=r._getPreviousParams(null,!0);n&&r._pushToHistory(n,!1),PDFView.isPresentationMode&&t.preventDefault()},!1)},_isStateObjectDefined:function(t){return t&&t.uid>=0&&t.fingerprint&&this.fingerprint===t.fingerprint&&t.target&&t.target.hash?!0:!1},get isHashChangeUnlocked(){if(!this.initialized)return!0;var e=this.allowHashChange;return this.allowHashChange=!0,e},updateCurrentBookmark:function(t,n){this.initialized&&(this.currentBookmark=t.substring(1),this.currentPage=n|0,this.updatePreviousBookmark&&(this.previousBookmark=this.currentBookmark,this.updatePreviousBookmark=!1))},updateNextHashParam:function(t){this.initialized&&(this.nextHashParam=t)},push:function(t,n){if(!this.initialized||!this.historyUnlocked)return;t.dest&&!t.hash&&(t.hash=this.current.hash&&this.current.dest&&this.current.dest===t.dest?this.current.hash:PDFView.getDestinationHash(t.dest).split("#")[1]),t.page&&(t.page|=0);if(n&&this.uid===0){this._pushToHistory(t,!1),this.previousHash=window.location.hash.substring(1),this.updatePreviousBookmark=this.nextHashParam?!1:!0;return}if(this.nextHashParam&&this.nextHashParam===t.hash){this.nextHashParam=null,this.updatePreviousBookmark=!0;return}t.hash?this.current.hash?this.current.hash!==t.hash?this._pushToHistory(t,!0):!this.current.page&&t.page&&this._pushToHistory(t,!1,!0):this._pushToHistory(t,!0):this.current.page&&t.page&&this.current.page!==t.page&&this._pushToHistory(t,!0)},_getPreviousParams:function(t,n){if(!this.currentBookmark||!this.currentPage)return null;if(!this.current.dest&&!t||n){if(this.previousBookmark===this.currentBookmark)return null}else{if(!this.current.page)return null;if(this.current.page===this.currentPage)return null}var r={hash:this.currentBookmark,page:this.currentPage};return PDFView.isPresentationMode&&(r.hash=null),r},_stateObj:function(t){return{fingerprint:this.fingerprint,uid:this.uid,target:t}},_pushToHistory:function(t,n,r){if(!this.initialized)return;!t.hash&&t.page&&(t.hash="page="+t.page);if(n&&!r){var i=this._getPreviousParams();i&&this._pushToHistory(i,!1)}r||this.uid===0?window.history.replaceState(this._stateObj(t),"",""):window.history.pushState(this._stateObj(t),"",""),this.currentUid=this.uid++,this.current=t,this.updatePreviousBookmark=!0},_goTo:function(t){if(!(this.initialized&&this.historyUnlocked&&this._isStateObjectDefined(t)))return;if(!this.reInitialized&&t.uid<this.currentUid){var n=this._getPreviousParams(!0);if(n){this._pushToHistory(this.current,!1),this._pushToHistory(n,!1),this.currentUid=t.uid,window.history.back();return}}this.historyUnlocked=!1,t.target.dest?PDFView.navigateTo(t.target.dest):PDFView.setHash(t.target.hash),this.currentUid=t.uid,t.uid>this.uid&&(this.uid=t.uid),this.current=t.target,this.updatePreviousBookmark=!0;var r=window.location.hash.substring(1);this.previousHash!==r&&(this.allowHashChange=!1),this.previousHash=r,this.historyUnlocked=!0},back:function(){this.go(-1)},forward:function(){this.go(1)},go:function(t){if(this.initialized&&this.historyUnlocked){var n=window.history.state;t===-1&&n&&n.uid>0?window.history.back():t===1&&n&&n.uid<this.uid-1&&window.history.forward()}}},PDFView={pages:[],thumbnails:[],currentScale:UNKNOWN_SCALE,currentScaleValue:null,initialBookmark:document.location.hash.substring(1),startedTextExtraction:!1,pageText:[],container:null,thumbnailContainer:null,initialized:!1,fellback:!1,pdfDocument:null,sidebarOpen:!1,pageViewScroll:null,thumbnailViewScroll:null,isPresentationMode:!1,previousScale:null,pageRotation:0,mouseScrollTimeStamp:0,mouseScrollDelta:0,lastScroll:0,previousPageNumber:1,initialize:function(){var t=this,n=this.container=document.getElementById("viewerContainer");this.pageViewScroll={},this.watchScroll(n,this.pageViewScroll,updateViewarea);var r=this.thumbnailContainer=document.getElementById("thumbnailView");this.thumbnailViewScroll={},this.watchScroll(r,this.thumbnailViewScroll,this.renderHighestPriority.bind(this)),PDFFindBar.initialize(),PDFFindController.initialize(),this.initialized=!0,n.addEventListener("scroll",function(){t.lastScroll=Date.now()},!1)},getPage:function(t){return this.pdfDocument.getPage(t)},watchScroll:function(t,n,r){n.down=!0,n.lastY=t.scrollTop,t.addEventListener("scroll",function(i){var s=t.scrollTop,o=n.lastY;s>o?n.down=!0:s<o&&(n.down=!1),n.lastY=s,r()},!0)},setScale:function(t,n,r){if(t==this.currentScale)return;var i=this.pages;for(var s=0;s<i.length;s++)i[s].update(t*CSS_UNITS);!r&&this.currentScale!=t&&this.pages[this.page-1].scrollIntoView(),this.currentScale=t;var o=document.createEvent("UIEvents");o.initUIEvent("scalechange",!1,!1,window,0),o.scale=t,o.resetAutoSettings=n,window.dispatchEvent(o)},parseScale:function(t,n,r){if("custom"==t)return;var i=parseFloat(t);this.currentScaleValue=t;if(i){this.setScale(i,!0,r);return}var s=this.container,o=this.pages[this.page-1];if(!o)return;var u=(s.clientWidth-SCROLLBAR_PADDING)/o.width*o.scale/CSS_UNITS,a=(s.clientHeight-VERTICAL_PADDING)/o.height*o.scale/CSS_UNITS;switch(t){case"page-actual":i=1;break;case"page-width":i=u;break;case"page-height":i=a;break;case"page-fit":i=Math.min(u,a);break;case"auto":i=Math.min(1,u)}this.setScale(i,n,r),selectScaleOption(t)},zoomIn:function(){var t=(this.currentScale*DEFAULT_SCALE_DELTA).toFixed(2);t=Math.ceil(t*10)/10,t=Math.min(MAX_SCALE,t),this.parseScale(t,!0)},zoomOut:function(){var t=(this.currentScale/DEFAULT_SCALE_DELTA).toFixed(2);t=Math.floor(t*10)/10,t=Math.max(MIN_SCALE,t),this.parseScale(t,!0)},set page(e){var t=this.pages,n=document.getElementById("pageNumber"),r=document.createEvent("UIEvents");r.initUIEvent("pagechange",!1,!1,window,0);if(!(0<e&&e<=t.length)){this.previousPageNumber=e,r.pageNumber=this.page,window.dispatchEvent(r);return}t[e-1].updateStats(),this.previousPageNumber=currentPageNumber,currentPageNumber=e,r.pageNumber=e,window.dispatchEvent(r);if(updateViewarea.inProgress)return;if(this.loading&&e==1)return;t[e-1].scrollIntoView()},get page(){return currentPageNumber},get supportsPrinting(){var e=document.createElement("canvas"),t="mozPrintCallback"in e;return Object.defineProperty(this,"supportsPrinting",{value:t,enumerable:!0,configurable:!0,writable:!1}),t},get supportsFullscreen(){var e=document.documentElement,t=e.requestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullScreen;if(document.fullscreenEnabled===!1||document.mozFullScreenEnabled===!1||document.webkitFullscreenEnabled===!1)t=!1;return Object.defineProperty(this,"supportsFullscreen",{value:t,enumerable:!0,configurable:!0,writable:!1}),t},get supportsIntegratedFind(){var e=!1;return Object.defineProperty(this,"supportsIntegratedFind",{value:e,enumerable:!0,configurable:!0,writable:!1}),e},get supportsDocumentFonts(){var e=!0;return Object.defineProperty(this,"supportsDocumentFonts",{value:e,enumerable:!0,configurable:!0,writable:!1}),e},get supportsDocumentColors(){var e=!0;return Object.defineProperty(this,"supportsDocumentColors",{value:e,enumerable:!0,configurable:!0,writable:!1}),e},get isHorizontalScrollbarEnabled(){var e=document.getElementById("viewerContainer");return e.scrollWidth>e.clientWidth},initPassiveLoading:function(){PDFView.loadingBar||(PDFView.loadingBar=new ProgressBar("#loadingBar",{}));var t={rangeListeners:[],progressListeners:[],addRangeListener:function(t){this.rangeListeners.push(t)},addProgressListener:function(t){this.progressListeners.push(t)},onDataRange:function(t,n){var r=this.rangeListeners;for(var i=0,s=r.length;i<s;++i)r[i](t,n)},onDataProgress:function(t){var n=this.progressListeners;for(var r=0,i=n.length;r<i;++r)n[r](t)},requestDataRange:function(t,n){FirefoxCom.request("requestDataRange",{begin:t,end:n})}};window.addEventListener("message",function(n){var r=n.data;if(!(typeof r=="object"&&"pdfjsLoadAction"in r))return;switch(r.pdfjsLoadAction){case"supportsRangedLoading":PDFView.open(r.pdfUrl,0,undefined,t,{length:r.length});break;case"range":t.onDataRange(r.begin,r.chunk);break;case"rangeProgress":t.onDataProgress(r.loaded);break;case"progress":PDFView.progress(r.loaded/r.total);break;case"complete":if(!r.data){PDFView.error(mozL10n.get("loading_error",null,"An error occurred while loading the PDF."),n);break}PDFView.open(r.data,0)}}),FirefoxCom.requestSync("initPassiveLoading",null)},setTitleUsingUrl:function(t){this.url=t;try{this.setTitle(decodeURIComponent(getFileName(t))||t)}catch(n){this.setTitle(t)}},setTitle:function(t){document.title=t},open:function(t,n,r,i,s){var o={password:r};typeof t=="string"?(this.setTitleUsingUrl(t),o.url=t):t&&"byteLength"in t&&(o.data=t);if(s)for(var u in s)o[u]=s[u];PDFView.loadingBar||(PDFView.loadingBar=new ProgressBar("#loadingBar",{})),this.pdfDocument=null;var a=this;a.loading=!0;var f=function(t,n){var i=mozL10n.get("request_password",null,"PDF is protected by a password:");n===PDFJS.PasswordResponses.INCORRECT_PASSWORD&&(i+="\n"+mozL10n.get("invalid_password",null,"Invalid Password.")),r=prompt(i);if(r&&r.length>0)return t(r)};PDFJS.getDocument(o,i,f).then(function(t){a.load(t,n),a.loading=!1},function(t,n){var r=mozL10n.get("loading_error",null,"An error occurred while loading the PDF.");if(n&&n.name==="InvalidPDFException")var r=mozL10n.get("invalid_file_error",null,"Invalid or corrupted PDF file.");if(n&&n.name==="MissingPDFException")var r=mozL10n.get("missing_file_error",null,"Missing PDF file.");var i={message:t};a.error(r,i),a.loading=!1},function(t){a.progress(t.loaded/t.total)})},download:function(){function t(){FirefoxCom.request("download",{originalUrl:n})}var n=this.url.split("#")[0],r=document.createElement("a");window.top===window&&!("download"in r)&&n===window.location.href.split("#")[0]&&(n+=n.indexOf("?")===-1?"?":"&"),n+="#pdfjs.action=download";if(r.click){r.href=n,r.target="_parent";if("download"in r){var i=n.match(/([^\/?#=]+\.pdf)/i);r.download=i?i[1]:"file.pdf"}(document.body||document.documentElement).appendChild(r),r.click(),r.parentNode.removeChild(r)}else window.open(n,"_parent")},fallback:function(){return},navigateTo:function(t){var n=this;PDFJS.Promise.all([this.pagesPromise,this.destinationsPromise]).then(function(){var e="";typeof t=="string"&&(e=t,t=n.destinations[t]);if(!(t instanceof Array))return;var r=t[0],i=r instanceof Object?n.pagesRefMap[r.num+" "+r.gen+" R"]:r+1;if(i){i>n.pages.length&&(i=n.pages.length);var s=n.pages[i-1];s.scrollIntoView(t),PDFHistory.push({dest:t,hash:e,page:i})}})},getDestinationHash:function(t){if(typeof t=="string")return PDFView.getAnchorUrl("#"+escape(t));if(t instanceof Array){var n=t[0],r=n instanceof Object?this.pagesRefMap[n.num+" "+n.gen+" R"]:n+1;if(r){var i=PDFView.getAnchorUrl("#page="+r),s=t[1];if(typeof s=="object"&&"name"in s&&s.name=="XYZ"){var o=t[4]||this.currentScaleValue,u=parseFloat(o);u&&(o=u*100),i+="&zoom="+o;if(t[2]||t[3])i+=","+(t[2]||0)+","+(t[3]||0)}return i}}return""},getAnchorUrl:function(t){return t},getOutputScale:function(){var t="devicePixelRatio"in window?window.devicePixelRatio:1;return{sx:t,sy:t,scaled:t!=1}},error:function(t,n){var r=mozL10n.get("error_version_info",{version:PDFJS.version||"?",build:PDFJS.build||"?"},"PDF.js v{{version}} (build: {{build}})")+"\n";n&&(r+=mozL10n.get("error_message",{message:n.message},"Message: {{message}}"),n.stack?r+="\n"+mozL10n.get("error_stack",{stack:n.stack},"Stack: {{stack}}"):(n.filename&&(r+="\n"+mozL10n.get("error_file",{file:n.filename},"File: {{file}}")),n.lineNumber&&(r+="\n"+mozL10n.get("error_line",{line:n.lineNumber},"Line: {{line}}"))));var i=document.getElementById("errorWrapper");i.removeAttribute("hidden");var s=document.getElementById("errorMessage");s.textContent=t;var o=document.getElementById("errorClose");o.onclick=function(){i.setAttribute("hidden","true")};var u=document.getElementById("errorMoreInfo"),a=document.getElementById("errorShowMore"),f=document.getElementById("errorShowLess");a.onclick=function(){u.removeAttribute("hidden"),a.setAttribute("hidden","true"),f.removeAttribute("hidden")},f.onclick=function(){u.setAttribute("hidden","true"),a.removeAttribute("hidden"),f.setAttribute("hidden","true")},a.removeAttribute("hidden"),f.setAttribute("hidden","true"),u.value=r,u.rows=r.split("\n").length-1},progress:function(t){var n=Math.round(t*100);n>PDFView.loadingBar.percent&&(PDFView.loadingBar.percent=n)},load:function(t,n){function r(e,t){e.onAfterDraw=function(){t.setImage(e.canvas)}}this.pdfDocument=t;var i=document.getElementById("errorWrapper");i.setAttribute("hidden","true"),t.dataLoaded().then(function(){var e=document.getElementById("loadingBar");e.classList.add("hidden");var t=document.getElementById("outerContainer");t.classList.remove("loadingInProgress")});var s=document.getElementById("thumbnailView");s.parentNode.scrollTop=0;while(s.hasChildNodes())s.removeChild(s.lastChild);"_loadingInterval"in s&&clearInterval(s._loadingInterval);var o=document.getElementById("viewer");while(o.hasChildNodes())o.removeChild(o.lastChild);var u=t.numPages,a=t.fingerprint;document.getElementById("numPages").textContent=mozL10n.get("page_of",{pageCount:u},"of {{pageCount}}"),document.getElementById("pageNumber").max=u,PDFView.documentFingerprint=a;var f=PDFView.store=new Settings(a);this.pageRotation=0;var l=this.pages=[];this.pageText=[],this.startedTextExtraction=!1;var c=this.pagesRefMap={},h=this.thumbnails=[],p=this.pagesPromise=new PDFJS.Promise,d=this,v=t.getPage(1);v.then(function(e){var i=e.getViewport(n||1),a=[];for(var f=1;f<=u;++f){var v=i.clone(),m=new PageView(o,f,n,d.navigateTo.bind(d),v),g=new ThumbnailView(s,f,v);r(m,g),l.push(m),h.push(g)}var y=document.createEvent("CustomEvent");y.initCustomEvent("documentload",!0,!0,{}),window.dispatchEvent(y);for(var f=1;f<=u;++f){var b=t.getPage(f);b.then(function(e){var t=e.pageNumber,n=l[t-1];n.pdfPage||n.setPdfPage(e);var r=h[t-1];r.pdfPage||r.setPdfPage(e);var i=e.ref,s=i.num+" "+i.gen+" R";c[s]=e.pageNumber}),a.push(b)}PDFJS.Promise.all(a).then(function(e){p.resolve(e)})});var m=f.initializedPromise;PDFJS.Promise.all([v,m]).then(function(){var e=null;if(f.get("exists",!1)){var t=f.get("page","1"),r=f.get("zoom",PDFView.currentScale),i=f.get("scrollLeft","0"),s=f.get("scrollTop","0");e="page="+t+"&zoom="+r+","+i+","+s}PDFHistory.initialize(d.documentFingerprint),d.setInitialView(e,n),window.parent===window&&(PDFView.container.focus(),PDFView.container.blur())}),p.then(function(){PDFView.supportsPrinting&&t.getJavaScript().then(function(e){e.length&&(console.warn("Warning: JavaScript is not supported"),PDFView.fallback());var t=/\bprint\s*\(/g;for(var n=0,r=e.length;n<r;n++){var i=e[n];if(i&&t.test(i)){setTimeout(function(){window.print()});return}}})});var g=this.destinationsPromise=t.getDestinations();g.then(function(e){d.destinations=e});var y=[p,g,PDFView.animationStartedPromise];PDFJS.Promise.all(y).then(function(){t.getOutline().then(function(e){d.outline=new DocumentOutlineView(e),document.getElementById("viewOutline").disabled=!e})}),t.getMetadata().then(function(e){var n=e.info,r=e.metadata;d.documentInfo=n,d.metadata=r,console.log("PDF "+t.fingerprint+" ["+n.PDFFormatVersion+" "+(n.Producer||"-")+" / "+(n.Creator||"-")+"]"+(PDFJS.version?" (PDF.js: "+PDFJS.version+")":""));var i;r&&r.has("dc:title")&&(i=r.get("dc:title")),!i&&n&&n.Title&&(i=n.Title),i&&d.setTitle(i+" - "+document.title),n.IsAcroFormPresent&&(console.warn("Warning: AcroForm/XFA is not supported"),PDFView.fallback())})},setInitialView:function(t,n){this.currentScale=0,this.currentScaleValue=null,PDFHistory.initialDestination?(this.navigateTo(PDFHistory.initialDestination),PDFHistory.initialDestination=null):this.initialBookmark?(this.setHash(this.initialBookmark),PDFHistory.push({hash:this.initialBookmark},!!this.initialBookmark),this.initialBookmark=null):t?this.setHash(t):n&&(this.parseScale(n,!0),this.page=1),PDFView.currentScale===UNKNOWN_SCALE&&this.parseScale(DEFAULT_SCALE,!0)},renderHighestPriority:function(){var t=this.getVisiblePages(),n=this.getHighestPriority(t,this.pages,this.pageViewScroll.down);if(n){this.renderView(n,"page");return}if(this.sidebarOpen){var r=this.getVisibleThumbs(),i=this.getHighestPriority(r,this.thumbnails,this.thumbnailViewScroll.down);i&&this.renderView(i,"thumbnail")}},getHighestPriority:function(t,n,r){var i=t.views,s=i.length;if(s===0)return!1;for(var o=0;o<s;++o){var u=i[o].view;if(!this.isViewFinished(u))return u}if(r){var a=t.last.id;if(n[a]&&!this.isViewFinished(n[a]))return n[a]}else{var f=t.first.id-2;if(n[f]&&!this.isViewFinished(n[f]))return n[f]}return!1},isViewFinished:function(t){return t.renderingState===RenderingStates.FINISHED},renderView:function(t,n){var r=t.renderingState;switch(r){case RenderingStates.FINISHED:return!1;case RenderingStates.PAUSED:PDFView.highestPriorityPage=n+t.id,t.resume();break;case RenderingStates.RUNNING:PDFView.highestPriorityPage=n+t.id;break;case RenderingStates.INITIAL:PDFView.highestPriorityPage=n+t.id,t.draw(this.renderHighestPriority.bind(this))}return!0},setHash:function(t){if(!t)return;if(t.indexOf("=")>=0){var n=PDFView.parseQueryString(t);if("nameddest"in n){PDFHistory.updateNextHashParam(n.nameddest),PDFView.navigateTo(n.nameddest);return}if("page"in n){var r=n.page|0||1;if("zoom"in n){var i=n.zoom.split(","),s=i[0],o=parseFloat(s);o&&(s=o/100);var u=[null,{name:"XYZ"},i.length>1?i[1]|0:null,i.length>2?i[2]|0:null,s],a=this.pages[r-1];a.scrollIntoView(u)}else this.page=r}if("pagemode"in n){var f=document.getElementById("sidebarToggle");n.pagemode==="thumbs"||n.pagemode==="bookmarks"?(this.sidebarOpen||f.click(),this.switchSidebarView(n.pagemode==="thumbs"?"thumbs":"outline")):n.pagemode==="none"&&this.sidebarOpen&&f.click()}}else/^\d+$/.test(t)?this.page=t:(PDFHistory.updateNextHashParam(unescape(t)),PDFView.navigateTo(unescape(t)))},switchSidebarView:function(t){var n=document.getElementById("thumbnailView"),r=document.getElementById("outlineView"),i=document.getElementById("viewThumbnail"),s=document.getElementById("viewOutline");switch(t){case"thumbs":var o=n.classList.contains("hidden");i.classList.add("toggled"),s.classList.remove("toggled"),n.classList.remove("hidden"),r.classList.add("hidden"),PDFView.renderHighestPriority(),o&&scrollIntoView(document.getElementById("thumbnailContainer"+this.page));break;case"outline":i.classList.remove("toggled"),s.classList.add("toggled"),n.classList.add("hidden"),r.classList.remove("hidden");if(s.getAttribute("disabled"))return}},getVisiblePages:function(){if(!this.isPresentationMode)return this.getVisibleElements(this.container,this.pages,!0);var t=[],n=this.page,r=this.pages[n-1];return t.push({id:r.id,view:r}),{first:r,last:r,views:t}},getVisibleThumbs:function(){return this.getVisibleElements(this.thumbnailContainer,this.thumbnails)},getVisibleElements:function(t,n,r){var i=t.scrollTop,s=i+t.clientHeight,o=t.scrollLeft,u=o+t.clientWidth,a=[],f,l,c,h,p,d,v;for(var m=0,g=n.length;m<g;++m){f=n[m],l=f.el.offsetTop+f.el.clientTop,c=f.el.clientHeight;if(l+c<i)continue;if(l>s)break;d=f.el.offsetLeft+f.el.clientLeft,v=f.el.clientWidth;if(d+v<o||d>u)continue;h=Math.max(0,i-l)+Math.max(0,l+c-s),p=(c-h)*100/c|0,a.push({id:f.id,y:l,view:f,percent:p})}var y=a[0],b=a[a.length-1];return r&&a.sort(function(e,t){var n=e.percent-t.percent;return Math.abs(n)>.001?-n:e.id-t.id}),{first:y,last:b,views:a}},parseQueryString:function(t){var n=t.split("&"),r={};for(var i=0,s=n.length;i<n.length;++i){var o=n[i].split("="),u=o[0],a=o.length>1?o[1]:null;r[decodeURIComponent(u)]=decodeURIComponent(a)}return r},beforePrint:function(){if(!this.supportsPrinting){var t=mozL10n.get("printing_not_supported",null,"Warning: Printing is not fully supported by this browser.");this.error(t);return}var n=!1;if(!this.pages.length)n=!0;else for(var r=0,i=this.pages.length;r<i;++r)if(!this.pages[r].pdfPage){n=!0;break}if(n){var s=mozL10n.get("printing_not_ready",null,"Warning: The PDF is not fully loaded for printing.");window.alert(s);return}var o=document.querySelector("body");o.setAttribute("data-mozPrintCallback",!0);for(var r=0,i=this.pages.length;r<i;++r)this.pages[r].beforePrint()},afterPrint:function(){var t=document.getElementById("printContainer");while(t.hasChildNodes())t.removeChild(t.lastChild)},presentationMode:function(){var t=document.fullscreenElement||document.mozFullScreen||document.webkitIsFullScreen;if(t)return!1;var n=document.getElementById("viewerContainer");if(document.documentElement.requestFullscreen)n.requestFullscreen();else if(document.documentElement.mozRequestFullScreen)n.mozRequestFullScreen();else{if(!document.documentElement.webkitRequestFullScreen)return!1;n.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}return!0},enterPresentationMode:function(){this.isPresentationMode=!0;var t=this.pages[this.page-1];this.previousScale=this.currentScaleValue,this.parseScale("page-fit",!0),setTimeout(function(){t.scrollIntoView()},0),this.showPresentationControls()},exitPresentationMode:function(){this.isPresentationMode=!1,this.parseScale(this.previousScale),this.page=this.page,this.clearMouseScrollState(),this.hidePresentationControls(),scrollIntoView(document.getElementById("thumbnailContainer"+this.page))},showPresentationControls:function(){var t=3e3,n=document.getElementById("viewerContainer");this.presentationControlsTimeout?clearTimeout(this.presentationControlsTimeout
):n.classList.add("presentationControls"),this.presentationControlsTimeout=setTimeout(function(){n.classList.remove("presentationControls"),delete PDFView.presentationControlsTimeout},t)},hidePresentationControls:function(){if(!this.presentationControlsTimeout)return;clearTimeout(this.presentationControlsTimeout),delete this.presentationControlsTimeout;var t=document.getElementById("viewerContainer");t.classList.remove("presentationControls")},rotatePages:function(t){this.pageRotation=(this.pageRotation+360+t)%360;for(var n=0,r=this.pages.length;n<r;n++){var i=this.pages[n];i.update(i.scale,this.pageRotation)}for(var n=0,r=this.thumbnails.length;n<r;n++){var s=this.thumbnails[n];s.update(this.pageRotation)}this.parseScale(this.currentScaleValue,!0),this.renderHighestPriority();var o=this.pages[this.page-1];if(!o)return;setTimeout(function(){o.scrollIntoView()},0)},mouseScroll:function(t){var n=50,r=(new Date).getTime(),i=this.mouseScrollTimeStamp;if(r>i&&r-i<n)return;(this.mouseScrollDelta>0&&t<0||this.mouseScrollDelta<0&&t>0)&&this.clearMouseScrollState(),this.mouseScrollDelta+=t;var s=120;if(Math.abs(this.mouseScrollDelta)>=s){var o={UP:-1,DOWN:1},u=this.mouseScrollDelta>0?o.UP:o.DOWN;this.clearMouseScrollState();var a=this.page;if(a==1&&u==o.UP||a==this.pages.length&&u==o.DOWN)return;this.page+=u,this.mouseScrollTimeStamp=r}},clearMouseScrollState:function(){this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0}},PageView=function(t,n,r,i,s){function a(e,t,n){function r(e,t){e.href=PDFView.getDestinationHash(t),e.onclick=function(){return t&&PDFView.navigateTo(t),!1},e.className="internalLink"}t.getAnnotations().then(function(i){n=n.clone({dontFlip:!0});for(var s=0;s<i.length;s++){var o=i[s],u=PDFJS.Annotation.fromData(o);if(!u||!u.hasHtml())continue;var a=u.getHtmlElement(t.commonObjs);mozL10n.translate(a),o=u.getData();var f=o.rect,l=t.view;f=PDFJS.Util.normalizeRect([f[0],l[3]-f[1]+l[1],f[2],l[3]-f[3]+l[1]]),a.style.left=f[0]+"px",a.style.top=f[1]+"px",a.style.position="absolute";var c=n.transform,h="matrix("+c.join(",")+")";CustomStyle.setProp("transform",a,h);var p=-f[0]+"px "+ -f[1]+"px";CustomStyle.setProp("transformOrigin",a,p),o.subtype==="Link"&&!o.url&&r(a,"dest"in o?o.dest:null),e.appendChild(a)}})}this.id=n,this.rotation=0,this.scale=r||1,this.viewport=s,this.pdfPageRotate=s.rotate,this.renderingState=RenderingStates.INITIAL,this.resume=null,this.textContent=null,this.textLayer=null;var o=document.createElement("a");o.name=""+this.id;var u=this.el=document.createElement("div");u.id="pageContainer"+this.id,u.className="page",u.style.width=Math.floor(this.viewport.width)+"px",u.style.height=Math.floor(this.viewport.height)+"px",t.appendChild(o),t.appendChild(u),this.setPdfPage=function(t){this.pdfPage=t,this.pdfPageRotate=t.rotate,this.viewport=t.getViewport(this.scale),this.stats=t.stats,this.update()},this.destroy=function(){this.update(),this.pdfPage&&this.pdfPage.destroy()},this.update=function(t,n){this.renderingState=RenderingStates.INITIAL,this.resume=null,typeof n!="undefined"&&(this.rotation=n),this.scale=t||this.scale;var r=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:this.scale,rotation:r}),u.style.width=Math.floor(this.viewport.width)+"px",u.style.height=Math.floor(this.viewport.height)+"px";while(u.hasChildNodes())u.removeChild(u.lastChild);u.removeAttribute("data-loaded"),delete this.canvas,this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon",u.appendChild(this.loadingIconDiv)},Object.defineProperty(this,"width",{get:function(){return this.viewport.width},enumerable:!0}),Object.defineProperty(this,"height",{get:function(){return this.viewport.height},enumerable:!0}),this.getPagePoint=function(t,n){return this.viewport.convertToPdfPoint(t,n)},this.scrollIntoView=function(t){if(!t){scrollIntoView(u);return}if(PDFView.isPresentationMode){PDFView.page=n;return}var r=0,i=0,s=0,o=0,a,f,l=0;switch(t[1].name){case"XYZ":r=t[2],i=t[3],l=t[4],r=r!==null?r:0,i=i!==null?i:this.height/this.scale;break;case"Fit":case"FitB":l="page-fit";break;case"FitH":case"FitBH":i=t[2],l="page-width";break;case"FitV":case"FitBV":r=t[2],l="page-height";break;case"FitR":r=t[2],i=t[3],s=t[4]-r,o=t[5]-i,a=(this.container.clientWidth-SCROLLBAR_PADDING)/s/CSS_UNITS,f=(this.container.clientHeight-SCROLLBAR_PADDING)/o/CSS_UNITS,l=Math.min(a,f);break;default:return}l&&l!==PDFView.currentScale?PDFView.parseScale(l,!0,!0):PDFView.currentScale===UNKNOWN_SCALE&&PDFView.parseScale(DEFAULT_SCALE,!0,!0);if(l==="page-fit"&&!t[4]){scrollIntoView(u);return}var c=[this.viewport.convertToViewportPoint(r,i),this.viewport.convertToViewportPoint(r+s,i+o)];setTimeout(function(){var t=PDFView.currentScale,n=Math.min(c[0][0],c[1][0]),r=Math.min(c[0][1],c[1][1]),i=Math.abs(c[0][0]-c[1][0]),s=Math.abs(c[0][1]-c[1][1]);scrollIntoView(u,{left:n,top:r,width:i,height:s})},0)},this.getTextContent=function(){return this.textContent||(this.textContent=this.pdfPage.getTextContent()),this.textContent},this.draw=function(t){function g(e){if(m)return;v.renderingState=RenderingStates.FINISHED,v.loadingIconDiv&&(u.removeChild(v.loadingIconDiv),delete v.loadingIconDiv),e&&PDFView.error(mozL10n.get("rendering_error",null,"An error occurred while rendering the page."),e),v.stats=n.stats,v.updateStats(),v.onAfterDraw&&v.onAfterDraw(),cache.push(v);var r=document.createEvent("CustomEvent");r.initCustomEvent("pagerender",!0,!0,{pageNumber:n.pageNumber}),u.dispatchEvent(r),t()}var n=this.pdfPage;if(!n){var r=PDFView.getPage(this.id);r.then(function(e){this.setPdfPage(e),this.draw(t)}.bind(this));return}this.renderingState!==RenderingStates.INITIAL&&console.error("Must be in new state before drawing"),this.renderingState=RenderingStates.RUNNING;var i=this.viewport,s=document.createElement("div");s.style.width=u.style.width,s.style.height=u.style.height,s.classList.add("canvasWrapper");var o=document.createElement("canvas");o.id="page"+this.id,s.appendChild(o),u.appendChild(s),this.canvas=o;var f=this.scale,l=PDFView.getOutputScale();o.width=Math.floor(i.width)*l.sx,o.height=Math.floor(i.height)*l.sy;var c=null;PDFJS.disableTextLayer||(c=document.createElement("div"),c.className="textLayer",c.style.width=o.width+"px",c.style.height=o.height+"px",u.appendChild(c));var h=this.textLayer=c?new TextLayerBuilder(c,this.id-1):null;if(l.scaled){var p="scale("+1/l.sx+", "+1/l.sy+")";CustomStyle.setProp("transform",o,p),CustomStyle.setProp("transformOrigin",o,"0% 0%"),c&&(CustomStyle.setProp("transform",c,p),CustomStyle.setProp("transformOrigin",c,"0% 0%"))}var d=o.getContext("2d");d._scaleX=l.sx,d._scaleY=l.sy,l.scaled&&d.scale(l.sx,l.sy);var v=this,m=!1,y={canvasContext:d,viewport:this.viewport,textLayer:h,continueCallback:function(t){if(v.renderingState===RenderingStates.INITIAL){m=!0;return}if(PDFView.highestPriorityPage!=="page"+v.id){v.renderingState=RenderingStates.PAUSED,v.resume=function(){v.renderingState=RenderingStates.RUNNING,t()};return}t()}};this.pdfPage.render(y).then(function(){g(null)},function(t){g(t)}),h&&this.getTextContent().then(function(t){h.setTextContent(t)}),a(u,n,this.viewport),u.setAttribute("data-loaded",!0)},this.beforePrint=function(){var t=this.pdfPage,n=t.getViewport(1),r=2,i=this.canvas=document.createElement("canvas");i.width=Math.floor(n.width)*r,i.height=Math.floor(n.height)*r,i.style.width=r*n.width+"pt",i.style.height=r*n.height+"pt";var s="scale("+1/r+", "+1/r+")";CustomStyle.setProp("transform",i,s),CustomStyle.setProp("transformOrigin",i,"0% 0%");var o=document.getElementById("printContainer");o.appendChild(i);var u=this;i.mozPrintCallback=function(e){var s=e.context;s.save(),s.fillStyle="rgb(255, 255, 255)",s.fillRect(0,0,i.width,i.height),s.restore(),s.scale(r,r);var o={canvasContext:s,viewport:n};t.render(o).then(function(){e.done(),u.pdfPage.destroy()},function(t){console.error(t),"abort"in e?e.abort():e.done(),u.pdfPage.destroy()})}},this.updateStats=function(){if(!this.stats)return;if(PDFJS.pdfBug&&Stats.enabled){var t=this.stats;Stats.add(this.id,t)}}},ThumbnailView=function(t,n,r){var i=document.createElement("a");i.href=PDFView.getAnchorUrl("#page="+n),i.title=mozL10n.get("thumb_page_title",{page:n},"Page {{page}}"),i.onclick=function(){return PDFView.page=n,!1},this.pdfPage=undefined,this.viewport=r,this.pdfPageRotate=r.rotate,this.rotation=0,this.pageWidth=this.viewport.width,this.pageHeight=this.viewport.height,this.pageRatio=this.pageWidth/this.pageHeight,this.id=n,this.canvasWidth=98,this.canvasHeight=this.canvasWidth/this.pageWidth*this.pageHeight,this.scale=this.canvasWidth/this.pageWidth;var s=this.el=document.createElement("div");s.id="thumbnailContainer"+n,s.className="thumbnail",n===1&&s.classList.add("selected");var o=document.createElement("div");o.className="thumbnailSelectionRing",o.style.width=this.canvasWidth+"px",o.style.height=this.canvasHeight+"px",s.appendChild(o),i.appendChild(s),t.appendChild(i),this.hasImage=!1,this.renderingState=RenderingStates.INITIAL,this.setPdfPage=function(t){this.pdfPage=t,this.pdfPageRotate=t.rotate,this.viewport=t.getViewport(1),this.update()},this.update=function(t){if(!this.pdfPage)return;t!==undefined&&(this.rotation=t);var n=(this.rotation+this.pdfPage.rotate)%360;this.viewport=this.viewport.clone({scale:1,rotation:n}),this.pageWidth=this.viewport.width,this.pageHeight=this.viewport.height,this.pageRatio=this.pageWidth/this.pageHeight,this.canvasHeight=this.canvasWidth/this.pageWidth*this.pageHeight,this.scale=this.canvasWidth/this.pageWidth,s.removeAttribute("data-loaded"),o.textContent="",o.style.width=this.canvasWidth+"px",o.style.height=this.canvasHeight+"px",this.hasImage=!1,this.renderingState=RenderingStates.INITIAL,this.resume=null},this.getPageDrawContext=function(){var t=document.createElement("canvas");t.id="thumbnail"+n,t.width=this.canvasWidth,t.height=this.canvasHeight,t.className="thumbnailImage",t.setAttribute("aria-label",mozL10n.get("thumb_page_canvas",{page:n},"Thumbnail of Page {{page}}")),s.setAttribute("data-loaded",!0),o.appendChild(t);var r=t.getContext("2d");return r.save(),r.fillStyle="rgb(255, 255, 255)",r.fillRect(0,0,this.canvasWidth,this.canvasHeight),r.restore(),r},this.drawingRequired=function(){return!this.hasImage},this.draw=function(t){if(!this.pdfPage){var n=PDFView.getPage(this.id);n.then(function(e){this.setPdfPage(e),this.draw(t)}.bind(this));return}this.renderingState!==RenderingStates.INITIAL&&console.error("Must be in new state before drawing"),this.renderingState=RenderingStates.RUNNING;if(this.hasImage){t();return}var r=this,i=this.getPageDrawContext(),s=this.viewport.clone({scale:this.scale}),o={canvasContext:i,viewport:s,continueCallback:function(e){if(PDFView.highestPriorityPage!=="thumbnail"+r.id){r.renderingState=RenderingStates.PAUSED,r.resume=function(){r.renderingState=RenderingStates.RUNNING,e()};return}e()}};this.pdfPage.render(o).then(function(){r.renderingState=RenderingStates.FINISHED,t()},function(n){r.renderingState=RenderingStates.FINISHED,t()}),this.hasImage=!0},this.setImage=function(t){if(this.hasImage||!t)return;this.renderingState=RenderingStates.FINISHED;var n=this.getPageDrawContext();n.drawImage(t,0,0,t.width,t.height,0,0,n.canvas.width,n.canvas.height),this.hasImage=!0}},DocumentOutlineView=function(t){function i(e,t){e.href=PDFView.getDestinationHash(t.dest),e.onclick=function(n){return PDFView.navigateTo(t.dest),!1}}var n=document.getElementById("outlineView"),r=document.getElementById("viewOutline");while(n.firstChild)n.removeChild(n.firstChild);if(!t){n.classList.contains("hidden")||PDFView.switchSidebarView("thumbs");return}var s=[{parent:n,items:t}];while(s.length>0){var o=s.shift(),u,a=o.items.length;for(u=0;u<a;u++){var f=o.items[u],l=document.createElement("div");l.className="outlineItem";var c=document.createElement("a");i(c,f),c.textContent=f.title,l.appendChild(c);if(f.items.length>0){var h=document.createElement("div");h.className="outlineItems",l.appendChild(h),s.push({parent:h,items:f.items})}o.parent.appendChild(l)}}},CustomStyle=function(){function r(){}var t=["ms","Moz","Webkit","O"],n={};return r.getProp=function(r,i){if(arguments.length==1&&typeof n[r]=="string")return n[r];i=i||document.documentElement;var s=i.style,o,u;if(typeof s[r]=="string")return n[r]=r;u=r.charAt(0).toUpperCase()+r.slice(1);for(var a=0,f=t.length;a<f;a++){o=t[a]+u;if(typeof s[o]=="string")return n[r]=o}return n[r]="undefined"},r.setProp=function(t,n,r){var i=this.getProp(t);i!="undefined"&&(n.style[i]=r)},r}(),TextLayerBuilder=function(t,n){var r=document.createDocumentFragment();this.textLayerDiv=t,this.layoutDone=!1,this.divContentDone=!1,this.pageIdx=n,this.matches=[],this.beginLayout=function(){this.textDivs=[],this.renderingDone=!1},this.endLayout=function(){this.layoutDone=!0,this.insertDivContent()},this.renderLayer=function(){var t=this,n=this.textDivs,i=this.textContent.bidiTexts,s=this.textLayerDiv,o=document.createElement("canvas"),u=o.getContext("2d"),a=1e5;if(n.length>a)return;for(var f=0,l=n.length;f<l;f++){var c=n[f];if("isWhitespace"in c.dataset)continue;r.appendChild(c),u.font=c.style.fontSize+" "+c.style.fontFamily;var h=u.measureText(c.textContent).width;if(h>0){var p=c.dataset.canvasWidth/h,d="scale("+p+", 1)";i[f].dir==="ttb"&&(d="rotate(90deg) "+d),CustomStyle.setProp("transform",c,d),CustomStyle.setProp("transformOrigin",c,"0% 0%"),s.appendChild(c)}}this.renderingDone=!0,this.updateMatches(),s.appendChild(r)},this.setupRenderLayoutTimer=function(){var t=200,n=this;Date.now()-PDFView.lastScroll>t?this.renderLayer():(this.renderTimer&&clearTimeout(this.renderTimer),this.renderTimer=setTimeout(function(){n.setupRenderLayoutTimer()},t))},this.appendText=function(t){var n=document.createElement("div"),r=t.fontSize*Math.abs(t.vScale);n.dataset.canvasWidth=t.canvasWidth*t.hScale,n.dataset.fontName=t.fontName,n.style.fontSize=r+"px",n.style.fontFamily=t.fontFamily,n.style.left=t.x+"px",n.style.top=t.y-r+"px",this.textDivs.push(n)},this.insertDivContent=function(){if(!this.layoutDone||this.divContentDone||!this.textContent)return;this.divContentDone=!0;var t=this.textDivs,n=this.textContent.bidiTexts;for(var r=0;r<n.length;r++){var i=n[r],s=t[r];if(!/\S/.test(i.str)){s.dataset.isWhitespace=!0;continue}s.textContent=i.str,s.dir=i.dir==="rtl"?"rtl":"ltr"}this.setupRenderLayoutTimer()},this.setTextContent=function(t){this.textContent=t,this.insertDivContent()},this.convertMatches=function(t){var n=0,r=0,i=this.textContent.bidiTexts,s=i.length-1,o=PDFFindController.state.query.length,u=-1,a,f=[];for(var l=0;l<t.length;l++){var c=t[l];while(n!==s&&c>=r+i[n].str.length)r+=i[n].str.length,n++;n==i.length&&console.error("Could not find matching mapping");var h={begin:{divIdx:n,offset:c-r}};c+=o;while(n!==s&&c>r+i[n].str.length)r+=i[n].str.length,n++;h.end={divIdx:n,offset:c-r},f.push(h)}return f},this.renderMatches=function(t){function f(e,t){var i=e.divIdx,u=r[i];u.textContent="";var a=n[i].str.substring(0,e.offset),f=document.createTextNode(a);if(t){var l=s&&i===o,c=document.createElement("span");c.className=t+(l?" selected":""),c.appendChild(f),u.appendChild(c);return}u.appendChild(f)}function l(e,t,i){var s=e.divIdx,o=r[s],u=n[s].str.substring(e.offset,t.offset),a=document.createTextNode(u);if(i){var f=document.createElement("span");f.className=i,f.appendChild(a),o.appendChild(f);return}o.appendChild(a)}function c(e,t){r[e].className=t}if(t.length===0)return;var n=this.textContent.bidiTexts,r=this.textDivs,i=null,s=this.pageIdx===PDFFindController.selected.pageIdx,o=PDFFindController.selected.matchIdx,u=PDFFindController.state.highlightAll,a={divIdx:-1,offset:undefined},h=o,p=h+1,d;if(u)h=0,p=t.length;else if(!s)return;for(d=h;d<p;d++){var v=t[d],m=v.begin,g=v.end,y=s&&d===o,b=y?" selected":"";y&&scrollIntoView(r[m.divIdx],{top:-50}),!i||m.divIdx!==i.divIdx?(i!==null&&l(i,a),f(m)):l(i,m);if(m.divIdx===g.divIdx)l(m,g,"highlight"+b);else{l(m,a,"highlight begin"+b);for(var w=m.divIdx+1;w<g.divIdx;w++)c(w,"highlight middle"+b);f(g,"highlight end"+b)}i=g}i&&l(i,a)},this.updateMatches=function(){if(!this.renderingDone)return;var t=this.matches,n=this.textDivs,r=this.textContent.bidiTexts,i=-1;for(var s=0;s<t.length;s++){var o=t[s],u=Math.max(i,o.begin.divIdx);for(var a=u;a<=o.end.divIdx;a++){var f=n[a];f.textContent=r[a].str,f.className=""}i=o.end.divIdx+1}if(!PDFFindController.active)return;this.matches=t=this.convertMatches(PDFFindController.pageMatches[this.pageIdx]||[]),this.renderMatches(this.matches)}};document.addEventListener("DOMContentLoaded",function(t){PDFView.initialize();var n=DEFAULT_URL;!window.File||!window.FileReader||!window.FileList||!window.Blob?document.getElementById("openFile").setAttribute("hidden","true"):document.getElementById("fileInput").value=null;var r=document.location.hash.substring(1),i=PDFView.parseQueryString(r);"disableWorker"in i&&(PDFJS.disableWorker=i.disableWorker==="true"),"disableRange"in i&&(PDFJS.disableRange=i.disableRange==="true"),"disableAutoFetch"in i&&(PDFJS.disableAutoFetch=i.disableAutoFetch==="true"),"disableFontFace"in i&&(PDFJS.disableFontFace=i.disableFontFace==="true");var s=navigator.language;"locale"in i&&(s=i.locale),mozL10n.setLanguage(s);if("textLayer"in i)switch(i.textLayer){case"off":PDFJS.disableTextLayer=!0;break;case"visible":case"shadow":case"hover":var o=document.getElementById("viewer");o.classList.add("textLayer-"+i.textLayer)}if("pdfBug"in i){PDFJS.pdfBug=!0;var u=i.pdfBug,a=u.split(",");PDFBug.enable(a),PDFBug.init()}PDFView.supportsPrinting||document.getElementById("print").classList.add("hidden"),PDFView.supportsFullscreen||document.getElementById("presentationMode").classList.add("hidden"),PDFView.supportsIntegratedFind&&document.getElementById("viewFind").classList.add("hidden"),PDFJS.LogManager.addLogger({warn:function(){PDFView.fallback()}});var f=document.getElementById("mainContainer"),l=document.getElementById("outerContainer");f.addEventListener("transitionend",function(e){if(e.target==f){var t=document.createEvent("UIEvents");t.initUIEvent("resize",!1,!1,window,0),window.dispatchEvent(t),l.classList.remove("sidebarMoving")}},!0),document.getElementById("sidebarToggle").addEventListener("click",function(){this.classList.toggle("toggled"),l.classList.add("sidebarMoving"),l.classList.toggle("sidebarOpen"),PDFView.sidebarOpen=l.classList.contains("sidebarOpen"),PDFView.renderHighestPriority()}),document.getElementById("viewThumbnail").addEventListener("click",function(){PDFView.switchSidebarView("thumbs")}),document.getElementById("viewOutline").addEventListener("click",function(){PDFView.switchSidebarView("outline")}),document.getElementById("previous").addEventListener("click",function(){PDFView.page--}),document.getElementById("next").addEventListener("click",function(){PDFView.page++}),document.getElementById("zoomIn").addEventListener("click",function(){PDFView.zoomIn()}),document.getElementById("zoomOut").addEventListener("click",function(){PDFView.zoomOut()}),document.getElementById("presentationMode").addEventListener("click",function(){PDFView.presentationMode()}),document.getElementById("openFile").addEventListener("click",function(){document.getElementById("fileInput").click()}),document.getElementById("print").addEventListener("click",function(){window.print()}),document.getElementById("download").addEventListener("click",function(){PDFView.download()}),document.getElementById("pageNumber").addEventListener("click",function(){this.select()}),document.getElementById("pageNumber").addEventListener("change",function(){PDFView.page=this.value|0,this.value!==(this.value|0).toString()&&(this.value=PDFView.page)}),document.getElementById("scaleSelect").addEventListener("change",function(){PDFView.parseScale(this.value)}),document.getElementById("firstPage").addEventListener("click",function(){PDFView.page=1}),document.getElementById("lastPage").addEventListener("click",function(){PDFView.page=PDFView.pdfDocument.numPages}),document.getElementById("pageRotateCcw").addEventListener("click",function(){PDFView.rotatePages(-90)}),document.getElementById("pageRotateCw").addEventListener("click",function(){PDFView.rotatePages(90)}),PDFView.open(n,0)},!0),window.addEventListener("resize",function(t){PDFView.initialized&&(document.getElementById("pageWidthOption").selected||document.getElementById("pageFitOption").selected||document.getElementById("pageAutoOption").selected)&&PDFView.parseScale(document.getElementById("scaleSelect").value),updateViewarea()}),window.addEventListener("hashchange",function(t){PDFHistory.isHashChangeUnlocked&&PDFView.setHash(document.location.hash.substring(1))}),window.addEventListener("change",function(t){var n=t.target.files;if(!n||n.length===0)return;var r=new FileReader;r.onload=function(t){var n=t.target.result,r=new Uint8Array(n);PDFView.open(r,0)};var i=n[0];r.readAsArrayBuffer(i),PDFView.setTitleUsingUrl(i.name),document.getElementById("viewBookmark").setAttribute("hidden","true"),document.getElementById("download").setAttribute("hidden","true")},!0),window.addEventListener("localized",function(t){document.getElementsByTagName("html")[0].dir=mozL10n.getDirection(),PDFView.animationStartedPromise.then(function(){var e=document.getElementById("scaleSelectContainer");if(e.clientWidth>0){var t=document.getElementById("scaleSelect");t.setAttribute("style","min-width: inherit;");var n=t.clientWidth+SCALE_SELECT_CONTAINER_PADDING;t.setAttribute("style","min-width: "+(n+SCALE_SELECT_PADDING)+"px;"),e.setAttribute("style","min-width: "+n+"px; "+"max-width: "+n+"px;")}})},!0),window.addEventListener("scalechange",function(t){document.getElementById("zoomOut").disabled=t.scale===MIN_SCALE,document.getElementById("zoomIn").disabled=t.scale===MAX_SCALE;var n=document.getElementById("customScaleOption");n.selected=!1;if(!t.resetAutoSettings&&(document.getElementById("pageWidthOption").selected||document.getElementById("pageFitOption").selected||document.getElementById("pageAutoOption").selected)){updateViewarea();return}var r=selectScaleOption(""+t.scale);r||(n.textContent=Math.round(t.scale*1e4)/100+"%",n.selected=!0),updateViewarea()},!0),window.addEventListener("pagechange",function(t){var n=t.pageNumber;if(PDFView.previousPageNumber!==n){document.getElementById("pageNumber").value=n;var r=document.querySelector(".thumbnail.selected");r&&r.classList.remove("selected");var i=document.getElementById("thumbnailContainer"+n);i.classList.add("selected");var s=PDFView.getVisibleThumbs(),o=s.views.length;if(o>0){var u=s.first.id,a=o>1?s.last.id:u;(n<=u||n>=a)&&scrollIntoView(i)}}document.getElementById("previous").disabled=n<=1,document.getElementById("next").disabled=n>=PDFView.pages.length},!0),window.addEventListener("DOMMouseScroll",function(e){if(e.ctrlKey){e.preventDefault();var t=e.detail,n=t>0?"zoomOut":"zoomIn";for(var r=0,i=Math.abs(t);r<i;r++)PDFView[n]()}else if(PDFView.isPresentationMode){var s=-40;PDFView.mouseScroll(e.detail*s)}},!1),window.addEventListener("mousemove",function(t){PDFView.isPresentationMode&&PDFView.showPresentationControls()},!1),window.addEventListener("mousedown",function(t){if(PDFView.isPresentationMode&&t.button===0){var n=t.target.href,r=n&&n.replace(/#.*$/,"")===window.location.href.replace(/#.*$/,"");r||(t.preventDefault(),PDFView.page++)}},!1),window.addEventListener("click",function(t){PDFView.isPresentationMode&&t.button===0&&t.preventDefault()},!1),window.addEventListener("keydown",function(t){var n=!1,r=(t.ctrlKey?1:0)|(t.altKey?2:0)|(t.shiftKey?4:0)|(t.metaKey?8:0);if(r===1||r===8||r===5||r===12)switch(t.keyCode){case 70:PDFView.supportsIntegratedFind||(PDFFindBar.toggle(),n=!0);break;case 61:case 107:case 187:case 171:PDFView.zoomIn(),n=!0;break;case 173:case 109:case 189:PDFView.zoomOut(),n=!0;break;case 48:case 96:PDFView.parseScale(DEFAULT_SCALE,!0),n=!1}if(r==1||r==8||r==5||r==12)switch(t.keyCode){case 71:PDFView.supportsIntegratedFind||(PDFFindBar.dispatchEvent("again",r==5||r==12),n=!0)}if(n){t.preventDefault();return}var i=document.activeElement||document.querySelector(":focus");if(!(!i||i.tagName.toUpperCase()!=="INPUT"&&i.tagName.toUpperCase()!=="SELECT"))return;var s=document.getElementById("toolbar");while(i){if(i===s&&!PDFView.isPresentationMode)return;i=i.parentNode}if(r===0)switch(t.keyCode){case 38:case 33:case 8:if(!PDFView.isPresentationMode&&PDFView.currentScaleValue!=="page-fit")break;case 37:if(PDFView.isHorizontalScrollbarEnabled)break;case 75:case 80:PDFView.page--,n=!0;break;case 27:!PDFView.supportsIntegratedFind&&PDFFindBar.opened&&(PDFFindBar.close(),n=!0);break;case 40:case 34:case 32:if(!PDFView.isPresentationMode&&PDFView.currentScaleValue!=="page-fit")break;case 39:if(PDFView.isHorizontalScrollbarEnabled)break;case 74:case 78:PDFView.page++,n=!0;break;case 36:PDFView.isPresentationMode&&(PDFView.page=1,n=!0);break;case 35:PDFView.isPresentationMode&&(PDFView.page=PDFView.pdfDocument.numPages,n=!0);break;case 82:PDFView.rotatePages(90)}if(r===4)switch(t.keyCode){case 82:PDFView.rotatePages(-90)}if(r===2)switch(t.keyCode){case 37:PDFView.isPresentationMode&&(PDFHistory.back(),n=!0);break;case 39:PDFView.isPresentationMode&&(PDFHistory.forward(),n=!0)}n&&(t.preventDefault(),PDFView.clearMouseScrollState())}),window.addEventListener("beforeprint",function(t){PDFView.beforePrint()}),window.addEventListener("afterprint",function(t){PDFView.afterPrint()}),function(){function t(e){var t=document.fullscreenElement||document.mozFullScreen||document.webkitIsFullScreen;t?PDFView.enterPresentationMode():PDFView.exitPresentationMode()}window.addEventListener("fullscreenchange",t,!1),window.addEventListener("mozfullscreenchange",t,!1),window.addEventListener("webkitfullscreenchange",t,!1)}(),function(){var t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){t()};PDFView.animationStartedPromise=new PDFJS.Promise,t(function(){PDFView.animationStartedPromise.resolve()})}();