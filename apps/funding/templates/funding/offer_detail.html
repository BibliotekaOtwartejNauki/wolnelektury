{% extends "base.html" %}
{% load url from future %}
{% load i18n %}
{% load funding_tags %}


{% block titleextra %}{{ object }}{% endblock %}


{% block body %}

<h1>{{ object }}</h1>
<div class="white-box">

    {% funding object %}
    {% offer_detail_head object %}

    {% if object.state == 'running' %}

        <div class="normal-text">

            <h3>{% trans "Support" %}</h3>
            <form action="" method="post">
                {% csrf_token %}
                <table>
                {{ form.as_table }}
                <tr><td></td><td><button type="submit">Wpłać!</button></td></tr>
                </table>
            </form>

        </div>
    {% endif %}

    <p class="normal-text"><a href="{% url 'funding' %}">Zobacz wszystkie zbiórki.</a></p>

</div>


<h2 style="font-size: 3em; margin: 1em 0 .5em;">{% trans "Supporters" %}:</h2>

<div class="white-box normal-text">
    
    <table class="wlfund">
    {% for funding in object.funding_set.all %}
        <tr class="funding-plus">
            <td><div>{{ funding.payed_at.date }}</div></td>
            <td><div>
                {% if funding.anonymous %}
                    <em>{% trans "Anonymous" %}</em>
                {% else %}
                    {{ funding.name }}
                {% endif %}
            </div></td>
            <td><div>+{{ funding.amount }} zł</div></td>
            <td><div>
                {% for perk in funding.perks.all %}
                    {{ perk.name }}{% if not forloop.last %},{% endif %}
                {% endfor %}&nbsp;
            </div></td>
    {% endfor %}
    </table>

</div>

{% endblock %}
