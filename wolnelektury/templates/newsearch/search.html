{% extends "base.html" %}
{% load i18n %}
{% load catalogue_tags %}

{% block title %}Search{% endblock %}

{% block metadescription %}{% endblock %}

{% block bodyid %}newsearch{% endblock %}

{% block body %}
    <h1>Search</h1>
    <form action="{% url newsearch %}" method="get" accept-charset="utf-8" id="search-form-x">
        <p>
	  <input type="text" name="q" style="width:250px; font-size: 1.2em;">
	  <input type="submit" value="{% trans "Search" %}" /> 
	</p>
    </form>

    <div id="results">
      <ol>
      {% for result in results %}
      <li>
	<p>{{result.book.pretty_title}} (id: {{result.book.id}}, score: {{result.score}})</p>
	<ul>
	  {% for part in result.parts %}
	  {% if part.header %}
	  <li>W {{part.header}} nr {{part.position}}</li>
	  {% else %} 
	  {% if part.fragment %}
	  <li>
	    <div style="font-weight: bold;">{% for tag in part.fragment.tags %}{{tag.name}} {% endfor %}</div>
	    {{part.fragment.text|safe}} </li>
	  {% endif %}
	  {% endif %}
	  {% endfor %}
	</ul>
      </li>
      {% empty %}
      <p>No results.</p>
      {% endfor %}
      </ol>
    </div>

{% endblock %}
